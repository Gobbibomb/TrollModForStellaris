namespace = core

# Start Events
event = {
	id = core.1

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_country = {
			is_ai = no
			has_origin = origin_start_core
		}
	}

	immediate = {
			set_global_flag = start_core
	}
}

event = {
	id = core.2

	hide_window = yes
	is_triggered_only = yes

	fire_only_once = yes

	trigger = {
		has_global_flag = central_crystal_flag
		any_system = {
			has_natural_wormhole = no
		}
	}

	immediate = {
		if = {
			limit = {
				galaxy_size = tiny
			}
			no_scope = {
				# makes system positions originate from galactic core
				spawn_system = {
					min_distance >= 40
					max_distance <= 40
					min_orientation_angle = 90
					max_orientation_angle = 90
					initializer = central_crystal_init_01
					hyperlane = yes
				}
			}
		}
		else_if = {
			limit = {
				galaxy_size = small
			}
			no_scope = {
				# makes system positions originate from galactic core
				spawn_system = {
					min_distance >= 60
					max_distance <= 60
					min_orientation_angle = 90
					max_orientation_angle = 90
					initializer = central_crystal_init_01
					hyperlane = yes
				}
			}
		}
		else_if = {
			limit = {
				galaxy_size = medium
			}
			no_scope = {
				# makes system positions originate from galactic core
				spawn_system = {
					min_distance >= 80
					max_distance <= 80
					min_orientation_angle = 90
					max_orientation_angle = 90
					initializer = central_crystal_init_01
					hyperlane = yes
				}
			}
		}
		else_if = {
			limit = {
				galaxy_size = large
			}
			no_scope = {
				# makes system positions originate from galactic core
				spawn_system = {
					min_distance >= 90
					max_distance <= 90
					min_orientation_angle = 90
					max_orientation_angle = 90
					initializer = central_crystal_init_01
					hyperlane = yes
				}
			}
		}
		else_if = {
			limit = {
				galaxy_size = huge
			}
			no_scope = {
				# makes system positions originate from galactic core
				spawn_system = {
					min_distance >= 95
					max_distance <= 95
					min_orientation_angle = 90
					max_orientation_angle = 90
					initializer = central_crystal_init_01
					hyperlane = yes
				}
			}
		}

		event_target:the_outer_gate = {
			random_system = {
				limit = {
					has_natural_wormhole = no
				}
				prev = {
					spawn_natural_wormhole = {
						bypass_type = wormhole
						random_pos = no
						orbit_angle = 360
					}
				}
				spawn_natural_wormhole = {
					bypass_type = wormhole
					random_pos = no
					orbit_angle = 360
				}
				link_wormholes = prev
			}
		}
	}
}